{"ast":null,"code":"import{createSlice,nanoid}from\"@reduxjs/toolkit\";import initialState from\"./initialState\";var messagesReducer=createSlice({name:\"messages\",initialState:initialState,reducers:{setCurrentDialog:function setCurrentDialog(state,action){// dispatch 0 if you want clear currentDialog\nif(action.payload===0){state.currentDialog=null;}else{var currentDialog=state.dialogs.find(function(item){return item.id===action.payload;});if(currentDialog){state.currentDialog=currentDialog;}}},addMessage:function addMessage(state,action){var currentDialog=state.currentDialog;var message={id:nanoid(),isMyMessage:true,text:action.payload};if(currentDialog){var _state$dialogs$find;(_state$dialogs$find=state.dialogs.find(function(item){return item.id===currentDialog.id;}))===null||_state$dialogs$find===void 0?void 0:_state$dialogs$find.messages.push(message);currentDialog.messages.push(message);}}}});export default messagesReducer.reducer;var _messagesReducer$acti=messagesReducer.actions,setCurrentDialog=_messagesReducer$acti.setCurrentDialog,addMessage=_messagesReducer$acti.addMessage;export{setCurrentDialog,addMessage};","map":{"version":3,"names":["createSlice","nanoid","initialState","messagesReducer","name","reducers","setCurrentDialog","state","action","payload","currentDialog","dialogs","find","item","id","addMessage","message","isMyMessage","text","messages","push","reducer","actions"],"sources":["C:/Documents/social-network/src/redux/messagesReducer/messagesReducer.ts"],"sourcesContent":["import { createSlice, current, nanoid, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport initialState from \"./initialState\";\r\n\r\nexport type initialStateType = {\r\n  currentDialog: {\r\n    name: string;\r\n    avatar: string;\r\n    id: string;\r\n    messages: {\r\n      text: string;\r\n      id: string;\r\n      isMyMessage: boolean;\r\n    }[];\r\n  } | null;\r\n  dialogs: {\r\n    name: string;\r\n    avatar: string;\r\n    id: string;\r\n    messages: {\r\n      text: string;\r\n      id: string;\r\n      isMyMessage: boolean;\r\n    }[];\r\n  }[];\r\n};\r\n\r\nconst messagesReducer = createSlice({\r\n  name: \"messages\",\r\n  initialState,\r\n\r\n  reducers: {\r\n    setCurrentDialog(state, action: PayloadAction<string | number>) {\r\n      // dispatch 0 if you want clear currentDialog\r\n      if (action.payload === 0) {\r\n        state.currentDialog = null;\r\n      } else {\r\n        let currentDialog = state.dialogs.find(\r\n          (item) => item.id === action.payload\r\n        );\r\n        if (currentDialog) {\r\n          state.currentDialog = currentDialog;\r\n        }\r\n      }\r\n    },\r\n    addMessage(state, action: PayloadAction<string>) {\r\n      const currentDialog = state.currentDialog;\r\n      const message = {\r\n        id: nanoid(),\r\n        isMyMessage: true,\r\n        text: action.payload,\r\n      };\r\n\r\n      if (currentDialog) {\r\n        state.dialogs.find(item => item.id === currentDialog.id)?.messages.push(message)\r\n        currentDialog.messages.push(message);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport default messagesReducer.reducer;\r\nexport const { setCurrentDialog, addMessage } = messagesReducer.actions;\r\n"],"mappings":"AAAA,OAASA,WAAT,CAA+BC,MAA/B,KAA4D,kBAA5D,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CAyBA,GAAMC,gBAAe,CAAGH,WAAW,CAAC,CAClCI,IAAI,CAAE,UAD4B,CAElCF,YAAY,CAAZA,YAFkC,CAIlCG,QAAQ,CAAE,CACRC,gBADQ,2BACSC,KADT,CACgBC,MADhB,CACwD,CAC9D;AACA,GAAIA,MAAM,CAACC,OAAP,GAAmB,CAAvB,CAA0B,CACxBF,KAAK,CAACG,aAAN,CAAsB,IAAtB,CACD,CAFD,IAEO,CACL,GAAIA,cAAa,CAAGH,KAAK,CAACI,OAAN,CAAcC,IAAd,CAClB,SAACC,IAAD,QAAUA,KAAI,CAACC,EAAL,GAAYN,MAAM,CAACC,OAA7B,EADkB,CAApB,CAGA,GAAIC,aAAJ,CAAmB,CACjBH,KAAK,CAACG,aAAN,CAAsBA,aAAtB,CACD,CACF,CACF,CAbO,CAcRK,UAdQ,qBAcGR,KAdH,CAcUC,MAdV,CAcyC,CAC/C,GAAME,cAAa,CAAGH,KAAK,CAACG,aAA5B,CACA,GAAMM,QAAO,CAAG,CACdF,EAAE,CAAEb,MAAM,EADI,CAEdgB,WAAW,CAAE,IAFC,CAGdC,IAAI,CAAEV,MAAM,CAACC,OAHC,CAAhB,CAMA,GAAIC,aAAJ,CAAmB,yBACjB,qBAAAH,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmB,SAAAC,IAAI,QAAIA,KAAI,CAACC,EAAL,GAAYJ,aAAa,CAACI,EAA9B,EAAvB,mEAA0DK,QAA1D,CAAmEC,IAAnE,CAAwEJ,OAAxE,EACAN,aAAa,CAACS,QAAd,CAAuBC,IAAvB,CAA4BJ,OAA5B,EACD,CACF,CA1BO,CAJwB,CAAD,CAAnC,CAkCA,cAAeb,gBAAe,CAACkB,OAA/B,CACO,0BAAyClB,eAAe,CAACmB,OAAzD,CAAQhB,gBAAR,uBAAQA,gBAAR,CAA0BS,UAA1B,uBAA0BA,UAA1B,C"},"metadata":{},"sourceType":"module"}