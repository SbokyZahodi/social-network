{"ast":null,"code":"import{createSlice,nanoid}from\"@reduxjs/toolkit\";import{profileThunks}from\"./profileThunks\";var initialState={status:null,profile:null,posts:[],isMyProfile:false,profilePending:false,isUserFollower:false,isFollowUnfollowPending:false};var profileReducer=createSlice({name:\"profile\",initialState:initialState,reducers:{createPost:function createPost(state,action){state.posts.push({id:nanoid(),content:action.payload.content});},switchIsMyProfile:function switchIsMyProfile(state,action){state.isMyProfile=action.payload;},editPost:function editPost(state,action){state.posts.forEach(function(item){if(item.id===action.payload.postID){item.content=action.payload.newContent;}});},deletePost:function deletePost(state,action){var array=state.posts.filter(function(item){return item.id!==action.payload.id;});state.posts=array;},setStatus:function setStatus(state,action){state.status=action.payload;}},extraReducers:function extraReducers(builder){builder.addCase(profileThunks.getProfile.fulfilled,function(state,action){state.profile=action.payload;state.profilePending=false;});builder.addCase(profileThunks.getProfile.pending,function(state,action){state.profilePending=true;});builder.addCase(profileThunks.getStatus.fulfilled,function(state,action){state.status=action.payload;});builder.addCase(profileThunks.setContact.fulfilled,function(state,action){});builder.addCase(profileThunks.setPhoto.fulfilled,function(state,action){if(state.profile){if(action.payload.resultCode===0){state.profile.photos.large=action.payload.data.photos.large;}}});builder.addCase(profileThunks.checkIsUserFollower.fulfilled,function(state,action){action.payload?state.isUserFollower=true:state.isUserFollower=false;});builder.addCase(profileThunks.followUser.fulfilled,function(state,action){if(action.payload.resultCode===0){state.isUserFollower=true;state.isFollowUnfollowPending=false;}});builder.addCase(profileThunks.followUser.pending,function(state,action){state.isFollowUnfollowPending=true;});builder.addCase(profileThunks.unfollowUser.fulfilled,function(state,action){if(action.payload.resultCode===0){state.isUserFollower=false;state.isFollowUnfollowPending=false;}});builder.addCase(profileThunks.unfollowUser.pending,function(state,action){state.isFollowUnfollowPending=true;});}});export default profileReducer.reducer;var _profileReducer$actio=profileReducer.actions,createPost=_profileReducer$actio.createPost,deletePost=_profileReducer$actio.deletePost,editPost=_profileReducer$actio.editPost,setStatus=_profileReducer$actio.setStatus,switchIsMyProfile=_profileReducer$actio.switchIsMyProfile;export{createPost,deletePost,editPost,setStatus,switchIsMyProfile};","map":{"version":3,"names":["createSlice","nanoid","profileThunks","initialState","status","profile","posts","isMyProfile","profilePending","isUserFollower","isFollowUnfollowPending","profileReducer","name","reducers","createPost","state","action","push","id","content","payload","switchIsMyProfile","editPost","forEach","item","postID","newContent","deletePost","array","filter","setStatus","extraReducers","builder","addCase","getProfile","fulfilled","pending","getStatus","setContact","setPhoto","resultCode","photos","large","data","checkIsUserFollower","followUser","unfollowUser","reducer","actions"],"sources":["C:/Documents/social-network/src/redux/profileReducer/profileReducer.ts"],"sourcesContent":["import { createSlice, current, nanoid, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { profile } from \"../../API/profileAPI/models\";\r\nimport { profileThunks } from \"./profileThunks\";\r\n\r\ninterface initialStateType {\r\n  profile: profile | null;\r\n  status: string | null;\r\n  posts: {\r\n    id: string;\r\n    content: string;\r\n  }[];\r\n  isMyProfile: boolean;\r\n  profilePending: boolean;\r\n  isUserFollower: boolean;\r\n  isFollowUnfollowPending: boolean;\r\n}\r\n\r\nconst initialState: initialStateType = {\r\n  status: null,\r\n  profile: null,\r\n  posts: [],\r\n  isMyProfile: false,\r\n  profilePending: false,\r\n  isUserFollower: false,\r\n  isFollowUnfollowPending: false,\r\n};\r\n\r\nconst profileReducer = createSlice({\r\n  name: \"profile\",\r\n  initialState,\r\n\r\n  reducers: {\r\n    createPost(state, action: PayloadAction<{ content: string }>) {\r\n      state.posts.push({\r\n        id: nanoid(),\r\n        content: action.payload.content,\r\n      });\r\n    },\r\n    switchIsMyProfile(state, action: PayloadAction<boolean>) {\r\n      state.isMyProfile = action.payload;\r\n    },\r\n    editPost(\r\n      state,\r\n      action: PayloadAction<{ postID: string; newContent: string }>\r\n    ) {\r\n      state.posts.forEach((item) => {\r\n        if (item.id === action.payload.postID) {\r\n          item.content = action.payload.newContent;\r\n        }\r\n      });\r\n    },\r\n    deletePost(state, action: PayloadAction<{ id: string }>) {\r\n      let array = state.posts.filter((item) => item.id !== action.payload.id);\r\n      state.posts = array;\r\n    },\r\n    setStatus(state, action: PayloadAction<string>) {\r\n      state.status = action.payload;\r\n    },\r\n  },\r\n  extraReducers(builder) {\r\n    builder.addCase(profileThunks.getProfile.fulfilled, (state, action) => {\r\n      state.profile = action.payload;\r\n      state.profilePending = false;\r\n    });\r\n    builder.addCase(profileThunks.getProfile.pending, (state, action) => {\r\n      state.profilePending = true;\r\n    });\r\n\r\n    builder.addCase(profileThunks.getStatus.fulfilled, (state, action) => {\r\n      state.status = action.payload;\r\n    });\r\n    builder.addCase(profileThunks.setContact.fulfilled, (state, action) => {});\r\n    builder.addCase(profileThunks.setPhoto.fulfilled, (state, action) => {\r\n      if (state.profile) {\r\n        if (action.payload.resultCode === 0) {\r\n          state.profile.photos.large = action.payload.data.photos.large;\r\n        }\r\n      }\r\n    });\r\n    builder.addCase(\r\n      profileThunks.checkIsUserFollower.fulfilled,\r\n      (state, action) => {\r\n        action.payload\r\n          ? (state.isUserFollower = true)\r\n          : (state.isUserFollower = false);\r\n      }\r\n    );\r\n    builder.addCase(profileThunks.followUser.fulfilled, (state, action) => {\r\n      if (action.payload.resultCode === 0) {\r\n        state.isUserFollower = true;\r\n        state.isFollowUnfollowPending = false;\r\n      }\r\n    });\r\n    builder.addCase(profileThunks.followUser.pending, (state, action) => {\r\n      state.isFollowUnfollowPending = true;\r\n    });\r\n    builder.addCase(profileThunks.unfollowUser.fulfilled, (state, action) => {\r\n      if (action.payload.resultCode === 0) {\r\n        state.isUserFollower = false;\r\n        state.isFollowUnfollowPending = false;\r\n      }\r\n    });\r\n    builder.addCase(profileThunks.unfollowUser.pending, (state, action) => {\r\n      state.isFollowUnfollowPending = true;\r\n    });\r\n  },\r\n});\r\n\r\nexport default profileReducer.reducer;\r\nexport const {\r\n  createPost,\r\n  deletePost,\r\n  editPost,\r\n  setStatus,\r\n  switchIsMyProfile,\r\n} = profileReducer.actions;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}