{"ast":null,"code":"import _objectSpread from\"C:/Documents/social-network/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{faker}from\"@faker-js/faker\";import{createSlice}from\"@reduxjs/toolkit\";import{postsThunks}from\"./postsThunks\";var initialState={posts:[],start:0,selectedPost:null};function getRandomInt(max){return Math.floor(Math.random()*max);}var postsReducer=createSlice({name:\"posts\",initialState:initialState,reducers:{setPosts:function setPosts(state,action){action.payload.forEach(function(item){state.posts.push(_objectSpread(_objectSpread({},item),{},{name:faker.name.fullName(),img:faker.image.avatar(),liked:false,likes:getRandomInt(100)}));});},setStart:function setStart(state,action){state.start=action.payload;},switchLike:function switchLike(state,action){var post=state.posts.find(function(item){return item.id===action.payload;});if(post){if(post.liked){post.liked=false;post.likes=post.likes-1;}else{post.liked=true;post.likes=post.likes+1;}}}},extraReducers:function extraReducers(builder){builder.addCase(postsThunks.getPosts.fulfilled,function(state,action){if(state.posts.length===0){action.payload.forEach(function(item){state.posts.push(_objectSpread(_objectSpread({},item),{},{name:faker.name.fullName(),img:faker.image.avatar(),liked:false,likes:getRandomInt(100)}));});state.start=state.start=5;}});builder.addCase(postsThunks.loadMorePosts.fulfilled,function(state,action){action.payload.forEach(function(item){state.posts.push(_objectSpread(_objectSpread({},item),{},{name:faker.name.fullName(),img:faker.image.avatar(),liked:false,likes:getRandomInt(100)}));});state.start=state.start+5;});}});export default postsReducer.reducer;var _postsReducer$actions=postsReducer.actions,setPosts=_postsReducer$actions.setPosts,setStart=_postsReducer$actions.setStart,switchLike=_postsReducer$actions.switchLike;export{setPosts,setStart,switchLike};","map":{"version":3,"names":["faker","createSlice","postsThunks","initialState","posts","start","selectedPost","getRandomInt","max","Math","floor","random","postsReducer","name","reducers","setPosts","state","action","payload","forEach","item","push","fullName","img","image","avatar","liked","likes","setStart","switchLike","post","find","id","extraReducers","builder","addCase","getPosts","fulfilled","length","loadMorePosts","reducer","actions"],"sources":["C:/Documents/social-network/src/redux/postsReducer/postsReducer.ts"],"sourcesContent":["import { faker } from \"@faker-js/faker\";\r\nimport { createSlice, nanoid, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { postsThunks } from \"./postsThunks\";\r\nimport { inPost, post } from \"./models\";\r\n\r\ninterface initialStateType {\r\n  posts: post[];\r\n  start: number;\r\n  selectedPost: post | null;\r\n}\r\n\r\nconst initialState: initialStateType = {\r\n  posts: [],\r\n  start: 0,\r\n  selectedPost: null,\r\n};\r\nfunction getRandomInt(max: number) {\r\n  return Math.floor(Math.random() * max);\r\n}\r\n\r\nconst postsReducer = createSlice({\r\n  name: \"posts\",\r\n  initialState,\r\n\r\n  reducers: {\r\n    setPosts(state, action: PayloadAction<inPost[]>) {\r\n      action.payload.forEach((item) => {\r\n        state.posts.push({\r\n          ...item,\r\n          name: faker.name.fullName(),\r\n          img: faker.image.avatar(),\r\n          liked: false,\r\n          likes: getRandomInt(100),\r\n        });\r\n      });\r\n    },\r\n    setStart(state, action) {\r\n      state.start = action.payload;\r\n    },\r\n    switchLike(state, action: PayloadAction<number>) {\r\n      let post = state.posts.find((item) => item.id === action.payload);\r\n\r\n      if (post) {\r\n        if (post.liked) {\r\n          post.liked = false;\r\n          post.likes = post.likes - 1;\r\n        } else {\r\n          post.liked = true;\r\n          post.likes = post.likes + 1;\r\n        }\r\n      }\r\n    },\r\n  },\r\n  extraReducers(builder) {\r\n    builder.addCase(postsThunks.getPosts.fulfilled, (state, action) => {\r\n      if (state.posts.length === 0) {\r\n        action.payload.forEach((item) => {\r\n          state.posts.push({\r\n            ...item,\r\n            name: faker.name.fullName(),\r\n            img: faker.image.avatar(),\r\n            liked: false,\r\n            likes: getRandomInt(100),\r\n          });\r\n        });\r\n        state.start = state.start = 5;\r\n      }\r\n    });\r\n    builder.addCase(postsThunks.loadMorePosts.fulfilled, (state, action) => {\r\n      action.payload.forEach((item) => {\r\n        state.posts.push({\r\n          ...item,\r\n          name: faker.name.fullName(),\r\n          img: faker.image.avatar(),\r\n          liked: false,\r\n          likes: getRandomInt(100),\r\n        });\r\n      });\r\n      state.start = state.start + 5;\r\n    });\r\n  },\r\n});\r\n\r\nexport default postsReducer.reducer;\r\nexport const { setPosts, setStart, switchLike } = postsReducer.actions;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}