{"ast":null,"code":"import _slicedToArray from\"C:/Documents/social-network/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useAppDispatch,useAppSelector}from\"../../../../../redux/hooks\";import{deletePost,editPost}from\"../../../../../redux/profileReducer/profileReducer\";import Dropdown from\"./Dropdown\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ContentBlock=function ContentBlock(_ref){var content=_ref.content;return/*#__PURE__*/_jsx(\"div\",{className:\"w-[200px] lg:w-[300px] p-1 m-1 rounded-md break-words outline-none\",style:{background:\"rgba(217, 217, 217, 0.1)\"},children:content});};var Post=function Post(_ref2){var content=_ref2.content,id=_ref2.id;var dispatch=useAppDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),EditMode=_useState2[0],setEditMode=_useState2[1];var avatar=useAppSelector(function(state){var _state$profile$profil;return(_state$profile$profil=state.profile.profile)===null||_state$profile$profil===void 0?void 0:_state$profile$profil.photos.large;});var isMyProfile=useAppSelector(function(state){return state.profile.isMyProfile;});var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),NewPostContent=_useState4[0],setNewPostContent=_useState4[1];useEffect(function(){setNewPostContent(content);},[]);var removePost=function removePost(){dispatch(deletePost({id:id}));};var editPostFunc=function editPostFunc(){dispatch(editPost({postID:id,newContent:NewPostContent}));setEditMode(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex mt-5\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar?avatar:\"/img/defaultUserPhoto.png\",alt:\"\",className:\"w-[46px] h-[46px] rounded-full\"}),EditMode?/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"w-[200px] lg:w-[300px] p-1 m-1 rounded-md break-words h-[200px] outline-none resize-none\",style:{background:\"rgba(217, 217, 217, 0.1)\"},value:NewPostContent,onChange:function onChange(e){return setNewPostContent(e.target.value);},autoFocus:true}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\" p-1.5 px-6 rounded-md text-green-500 text-lg\",style:{background:\"rgba(217, 217, 217, 0.14)\"},onClick:function onClick(){return editPostFunc();},children:\"Save\"})})]}):/*#__PURE__*/_jsx(ContentBlock,{content:NewPostContent}),isMyProfile&&/*#__PURE__*/_jsx(Dropdown,{setEditMode:setEditMode,removePost:removePost})]});};export default Post;","map":{"version":3,"names":["useEffect","useState","useAppDispatch","useAppSelector","deletePost","editPost","Dropdown","ContentBlock","content","background","Post","id","dispatch","EditMode","setEditMode","avatar","state","profile","photos","large","isMyProfile","NewPostContent","setNewPostContent","removePost","editPostFunc","postID","newContent","e","target","value"],"sources":["C:/Documents/social-network/src/components/ProfilePage/Profile/RightBar/Posts/Post.tsx"],"sourcesContent":["import { FC, useEffect, useState } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../../../redux/hooks\";\r\nimport {\r\n  deletePost,\r\n  editPost,\r\n} from \"../../../../../redux/profileReducer/profileReducer\";\r\nimport Dropdown from \"./Dropdown\";\r\n\r\nconst ContentBlock: FC<{ content: string }> = ({ content }) => {\r\n  return (\r\n    <div\r\n      className={`w-[200px] lg:w-[300px] p-1 m-1 rounded-md break-words outline-none`}\r\n      style={{ background: \"rgba(217, 217, 217, 0.1)\" }}\r\n    >\r\n      {content}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Post: FC<{ content: string; id: string }> = ({ content, id }) => {\r\n  let dispatch = useAppDispatch();\r\n  const [EditMode, setEditMode] = useState(false);\r\n  let avatar = useAppSelector((state) => state.profile.profile?.photos.large);\r\n  let isMyProfile = useAppSelector((state) => state.profile.isMyProfile);\r\n  const [NewPostContent, setNewPostContent] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setNewPostContent(content);\r\n  }, []);\r\n\r\n  const removePost = () => {\r\n    dispatch(deletePost({ id: id }));\r\n  };\r\n\r\n  const editPostFunc = () => {\r\n    dispatch(editPost({ postID: id, newContent: NewPostContent }));\r\n    setEditMode(false);\r\n  };\r\n\r\n  return (\r\n    <div className={`flex mt-5`}>\r\n      <img\r\n        src={avatar ? avatar : \"/img/defaultUserPhoto.png\"}\r\n        alt=\"\"\r\n        className=\"w-[46px] h-[46px] rounded-full\"\r\n      />\r\n\r\n      {EditMode ? (\r\n        <div className={``}>\r\n          <textarea\r\n            className={`w-[200px] lg:w-[300px] p-1 m-1 rounded-md break-words h-[200px] outline-none resize-none`}\r\n            style={{ background: \"rgba(217, 217, 217, 0.1)\" }}\r\n            value={NewPostContent}\r\n            onChange={(e) => setNewPostContent(e.target.value)}\r\n            autoFocus\r\n          />\r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              className=\" p-1.5 px-6 rounded-md text-green-500 text-lg\"\r\n              style={{ background: \"rgba(217, 217, 217, 0.14)\" }}\r\n              onClick={() => editPostFunc()}\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <ContentBlock content={NewPostContent} />\r\n      )}\r\n\r\n      {isMyProfile && (\r\n        <Dropdown setEditMode={setEditMode} removePost={removePost} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default Post;\r\n"],"mappings":"iHAAA,OAAaA,SAAb,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,4BAA/C,CACA,OACEC,UADF,CAEEC,QAFF,KAGO,oDAHP,CAIA,MAAOC,SAAP,KAAqB,YAArB,C,wFAEA,GAAMC,aAAqC,CAAG,QAAxCA,aAAwC,MAAiB,IAAdC,QAAc,MAAdA,OAAc,CAC7D,mBACE,YACE,SAAS,qEADX,CAEE,KAAK,CAAE,CAAEC,UAAU,CAAE,0BAAd,CAFT,UAIGD,OAJH,EADF,CAQD,CATD,CAWA,GAAME,KAAyC,CAAG,QAA5CA,KAA4C,OAAqB,IAAlBF,QAAkB,OAAlBA,OAAkB,CAATG,EAAS,OAATA,EAAS,CACrE,GAAIC,SAAQ,CAAGV,cAAc,EAA7B,CACA,cAAgCD,QAAQ,CAAC,KAAD,CAAxC,wCAAOY,QAAP,eAAiBC,WAAjB,eACA,GAAIC,OAAM,CAAGZ,cAAc,CAAC,SAACa,KAAD,yDAAWA,KAAK,CAACC,OAAN,CAAcA,OAAzB,gDAAW,sBAAuBC,MAAvB,CAA8BC,KAAzC,EAAD,CAA3B,CACA,GAAIC,YAAW,CAAGjB,cAAc,CAAC,SAACa,KAAD,QAAWA,MAAK,CAACC,OAAN,CAAcG,WAAzB,EAAD,CAAhC,CACA,eAA4CnB,QAAQ,CAAC,EAAD,CAApD,yCAAOoB,cAAP,eAAuBC,iBAAvB,eAEAtB,SAAS,CAAC,UAAM,CACdsB,iBAAiB,CAACd,OAAD,CAAjB,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMe,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvBX,QAAQ,CAACR,UAAU,CAAC,CAAEO,EAAE,CAAEA,EAAN,CAAD,CAAX,CAAR,CACD,CAFD,CAIA,GAAMa,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzBZ,QAAQ,CAACP,QAAQ,CAAC,CAAEoB,MAAM,CAAEd,EAAV,CAAce,UAAU,CAAEL,cAA1B,CAAD,CAAT,CAAR,CACAP,WAAW,CAAC,KAAD,CAAX,CACD,CAHD,CAKA,mBACE,aAAK,SAAS,YAAd,wBACE,YACE,GAAG,CAAEC,MAAM,CAAGA,MAAH,CAAY,2BADzB,CAEE,GAAG,CAAC,EAFN,CAGE,SAAS,CAAC,gCAHZ,EADF,CAOGF,QAAQ,cACP,aAAK,SAAS,GAAd,wBACE,iBACE,SAAS,2FADX,CAEE,KAAK,CAAE,CAAEJ,UAAU,CAAE,0BAAd,CAFT,CAGE,KAAK,CAAEY,cAHT,CAIE,QAAQ,CAAE,kBAACM,CAAD,QAAOL,kBAAiB,CAACK,CAAC,CAACC,MAAF,CAASC,KAAV,CAAxB,EAJZ,CAKE,SAAS,KALX,EADF,cAQE,YAAK,SAAS,CAAC,kBAAf,uBACE,eACE,SAAS,CAAC,+CADZ,CAEE,KAAK,CAAE,CAAEpB,UAAU,CAAE,2BAAd,CAFT,CAGE,OAAO,CAAE,yBAAMe,aAAY,EAAlB,EAHX,kBADF,EARF,GADO,cAoBP,KAAC,YAAD,EAAc,OAAO,CAAEH,cAAvB,EA3BJ,CA8BGD,WAAW,eACV,KAAC,QAAD,EAAU,WAAW,CAAEN,WAAvB,CAAoC,UAAU,CAAES,UAAhD,EA/BJ,GADF,CAoCD,CAxDD,CAyDA,cAAeb,KAAf"},"metadata":{},"sourceType":"module"}